<!--

Código por byAd12

~ Dedicatoria a: Ruth

-->

<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex">
        <meta name="robots" content="noindex,nofollow">
        <title>VSFTPD - Linux y FileZilla</title>
        
        <link rel="stylesheet" type="text/css" href="../resources/blog.css">
    </head>
    <body>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <div class="menu_bar" id="menu_bar">
            <!-- BARRA DE MENÚ -->
            <h1 class="logo" translate="no"><a href="../index.html">by<span>Ad</span>12</a></h1>
            <ul>
                <li><a href="../guides.html">~/Guías</a></li>
                <li class="ocultarMOVIL"><a onclick="esconder()">./Ocultar</a></li>
                <li><input type="color" class="NavColorCambiar" id="NavColorCambiar2" value="#222523"></li>
            </ul>
        </div>

        <div class="gtranslate_wrapper" id="gtranslate_wrapper"></div>
        <script>window.gtranslateSettings = {"default_language":"es","native_language_names":true,"detect_browser_language":true,"languages":["es","en","de","gl","ru"],"globe_color":"#66aaff","wrapper_selector":".gtranslate_wrapper","flag_size":16,"horizontal_position":"left","vertical_position":"top","globe_size":20}</script>
        <script src="https://cdn.gtranslate.net/widgets/latest/globe.js" defer></script>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github-dark-dimmed.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/bash.min.js"></script>
        <script>hljs.highlightAll();</script>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <h1 style="margin: 15px 0;">VSFTPD</h1>
        <h2 class="TituloSecundario" id="TituloSecundario">Servidor FTP en Linux</h2>
        <h2 class="TituloCreditosSuperior" id="InsertarCreditos"></h2>
        <hr>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <p style="color: black; position: sticky; top: 0;" id="dd"></p>
        <div class="parte1">
            <div>
                <h2>Instalación</h2>
                <pre class="codigo" translate="no"><code class="bash">apt-get update</code></pre>
                <pre class="codigo" translate="no"><code class="bash">apt-get install vsftpd</code></pre>
                <p class="Expl">Al instalarlo se crea un usuario <span class="span_contenido" translate="no">ftp</span> automáticamente, que se incluye en el grupo <span class="span_contenido" translate="no">ftp</span>.</p>
                <p class="Expl">También crea el directorio <span class="span_url" translate="no">/srv/ftp</span>, que su propietario es <span class="span_contenido" translate="no">root</span> y su grupo <span class="span_contenido" translate="no">ftp</span>. Sirve como directorio para los usuarios anónimos.</p>
            </div>

            <div>
                <h2>Comprobación</h2>
                <p>Comprobar que tenemos el usuario y grupo <span class="span_contenido" translate="no">ftp</span> y que su directorio home es <span class="span_url" translate="no">/srv/ftp</span>:</p>
                <pre class="codigo" translate="no"><code class="bash">cat /etc/passwd | grep ftp</code></pre>
                <pre class="codigo" translate="no"><code class="bash">cat /etc/group | grep ftp</code></pre>
                <pre class="codigo" translate="no"><code class="bash">ls /srv/ftp</code></pre>
            </div>


            <div>
                <h2>Archivos importantes</h2>

                <p>Algunos de los siguientes archivos pueden no estar creados por defecto, en ese caso deberían crearse si se necesitan:</p>

                <div class="TablaDivScroll">
                    <table class="TablaComandos">
                        <tr>
                            <td>Fichero de configuración</td>
                            <td><span class="span_url" translate="no">/etc/vsftpd.conf</span></td>
                        </tr>
                        <tr>
                            <td>Lista de usuarios del sistema <b>excluidos</b> paras iniciar sesión</td>
                            <td><span class="span_url" translate="no">/etc/ftpusers</span></td>
                        </tr>
                        <tr>
                            <td>
                                Como el anterior pero también se puede permitir si en la configuración hay:
                                <br><span class="span_contenido" translate="no">userlist_deny=NO</span>
                            </td>
                            <td><span class="span_url" translate="no">/etc/vsftpd.user_list</span></td>
                        </tr>
                        <tr>
                            <td>
                                Usuarios que no están enjaulados si lo siguiente está en la configuración:
                                <br><span class="span_contenido" translate="no">chroot_local_user=YES</span>, <span class="span_contenido" translate="no">chroot_list_enable=YES</span>, 
                                <br><span class="span_contenido" translate="no">chroot_list_file=[ruta]</span>
                            </td>
                            <td><span class="span_url" translate="no">/etc/vsftpd.chroot_list</span></td>
                        </tr>
                        <tr>
                            <td>Para ver los registros de accesos al servidor</td>
                            <td><span class="span_url" translate="no">/var/log/vsftpd.log</span></td>
                        </tr>
                    </table>
                </div>
            </div>

            <div>
                <h2>Servicio</h2>
                <p>Iniciar el servidor:</p>
                <pre class="codigo" translate="no"><code class="bash">service vsftpd start</code></pre>
                
                <p>Comprobar el estado del servidor:</p>
                <pre class="codigo" translate="no"><code class="bash">service vsftpd status</code></pre>
            </div>

            <div>
                <h2>Directivas de:<br><span translate="no">/etc/vsftpd.conf</span></h2>

                <p>Activar los <b>usuario anónimos</b>: "ftp" o "anonymous". Su carpeta home será <span class="span_url">/srv/ftp</span>, de solo lectura:</p>
                <pre class="codigo" translate="no"><code class="bash">anonymous_enable=YES</code></pre>

                <p>Permite la <b>conexión con usuarios del sistema</b>. SU directorio será el que tenga como home en el sistema operativo. Pero por defecto no está enjaulado:</p>
                <pre class="codigo" translate="no"><code class="bash">local_enable=YES</code></pre>

                <p>Permitir <b>escritura</b>:</p>
                <pre class="codigo" translate="no"><code class="bash">write_enable=YES</code></pre>

                <p>Mensaje de <b>bienvenida</b>:</p>
                <pre class="codigo" translate="no"><code class="bash">ftpd_banner=Mensaje con espacios</code></pre>

            </div>
            
            <div>
                <h2>Enjaular Usuarios</h2>

                <p>Enjaular a todos los usuarios locales - <span class="span_url" translate="no">/etc/vsftpd.conf</span>:</p>
                <pre class="codigo" translate="no"><code class="bash">chroot_local_user=YES</code></pre>

                <p>Enjaular a un usuario local específico - <span class="span_url" translate="no">/etc/vsftpd.conf</span>:</p>
                <pre class="codigo" translate="no"><code class="bash">chroot_local_user=NO
chroot_list_enable=YES
chroot_list_file=/etc/vsftpd.chroot_list</code></pre>
                <p class="Expl"><span class="span_url" translate="no">/etc/vsftpd.chroot_list</span>:</p>
                <pre class="codigo" translate="no"><code class="bash">NombreUsuario1
NombreUsuario2
..</code></pre>

            </div>

        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <hr>

        <div class="parte1">
            <div>
                <h2><span>Ejemplo:</span> Práctica 1</h2>
                <p>Meter 3 ficheros en "/srv/ftp".</p>
                <p>1. Conectar con el usuario "ftp" y descargar un fichero al <b>escritorio</b>.</p>
                <pre class="codigo" translate="no"><code class="bash">ftp [ip]</code></pre>
                <pre class="codigo" translate="no"><code class="bash">get [nombre_archivo] /home/[usuario]/Escritorio</code></pre>
                <p>2. Conectarme con un usuario creado "mortadelo" (<span class="span_contenido" translate="no">adduser (user)</span>) y comprobar:</p>
                <ul class="ULFTPCamb1">
                    <li>Que me está dejando.</li>
                    <br>
                    <li>Subir un archivo a /home/mortadelo.
                        <pre class="codigo" translate="no"><code class="bash">put [nombre_archivo]</code></pre>
                    </li>
                    <br>
                    <li>Subir un fichero al escritorio del compañero.
                        <pre class="codigo" translate="no"><code class="bash">put [nombre_archivo] /home/[usuario_compañero]/Escritorio</code></pre>
                        <p class="Expl">El usuario <span class="span_contenido" translate="no">mortadelo</span> debe tener permisos en la carpeta de destino.</p>
                    </li>
                </ul>
                
            </div>

            <!-- ================== -->

            <div>
                <h2><span>Ejemplo:</span> Práctica 2</h2>
                <p>Hacer un servidor con:</p>

                <p>1. El mensaje de bienvenida sea "<b>Bienvenido chema</b>" - <span class="span_url" translate="no">/etc/vsftpd.conf</span>.</p>
                <pre class="codigo" translate="no"><code class="bash">ftpd_banner=Bienvenido chema</code></pre>

                <p>2. Posibilidad de acceso con el usuario anónimo - <span class="span_url" translate="no">/etc/vsftpd.conf</span>:</p>
                <pre class="codigo" translate="no"><code class="bash">anonymous_enable=YES</code></pre>

                <p>3. Permiso de lectura y escritura para 3 usuarios de Sistema:</p>
                <pre class="codigo" translate="no"><code class="bash">chmod -R 777 /home/[USUARIO]</code></pre>
                
            </div>

        </div>

        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <hr>

        <div class="parte1">
            <div>
                <h2>Comandos más importantes para ftp</h2>

                <table class="TablaComandos">
                    <tr>
                        <td><span class="span_contenido" translate="no">ls</span></td>
                        <td>Listar el contenido del directorio</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">cd</span></td>
                        <td>Cambiar de directorio</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">!cd</span></td>
                        <td>Cambiar de directorio del sistema local (no el servidor)</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">get</span></td>
                        <td>Descargar un archivo del servidor</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">put</span></td>
                        <td>Enviar un archivo al servidor</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">pwd</span></td>
                        <td>Ver directorio actual</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">rm</span></td>
                        <td>Eliminar un archivo</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">!ls</span></td>
                        <td>Listar archivos del sistema local (no el servidor)</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">mkdir</span></td>
                        <td>Crear una carpeta</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">!mkdir</span></td>
                        <td>Crear una carpeta en la sistema local (no el servidor)</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">bye</span></td>
                        <td>Cerrar una conexión FTP</td>
                    </tr>
                    <tr>
                        <td><span class="span_contenido" translate="no">?</span></td>
                        <td>Todos los comandos disponibles</td>
                    </tr>
                </table>
                
            </div>

            <div>
                <h2>Conectarse con ftp</h2>

                <p>Comando a ejecutar en la terminal:</p>
                <pre class="codigo" translate="no"><code class="bash">ftp [ip_servidor]:(puerto)</code></pre>
                <p class="Expl">Pedirá usuario y contraseña.</p>
                
            </div>
        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <h1 style="margin: 15px 0;">FILEZILLA</h1>
        <h2 class="TituloSecundario" id="TituloSecundario">Servidor FTP en Windows</h2>
        <hr class="SeparadorConTitulo">
        <!-- ......................................................... -->
        <div class="parte1">
            <!-- ......................................................... -->
            <div class="BotonPersonalizadoDIV">
                <a class="BotonPersonalizadoTexto" href="https://filezilla-project.org/download.php?platform=win64&type=server" target="_blank">
                    <p class="TextoRelacionado">Filezilla Server</p>
                    <p class="BotonFlecha"><span>↗</span></p>
                </a>
                <a class="BotonPersonalizadoTexto" href="https://filezilla-project.org/download.php?platform=win64" target="_blank">
                    <p class="TextoRelacionado">Filezilla Client</p>
                    <p class="BotonFlecha"><span>↗</span></p>
                </a>
            </div>
            <!-- ......................................................... -->
            <div class="carrusel">
                <h2>Configuración - <span>Servidor</span></h2>
                <div class="carrusel_imagenes" id="carrusel_imagenes-server">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_server/step1.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_server/step2.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_server/step3.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_server/step4.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_server/step5.png" onclick="agrandarImagen(this)">
                </div>
                <button class="carrusel_boton carrusel_izquierda" onclick="moverImagenes(-1, 'server')">&#10094;</button>
                <button class="carrusel_boton carrusel_derecha" onclick="moverImagenes(1, 'server')">&#10095;</button>
            </div>
            <!-- ......................................................... -->
            <div class="carrusel">
                <h2>Configuración - <span>Cliente</span></h2>
                <div class="carrusel_imagenes" id="carrusel_imagenes-cliente">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_client/step1.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_client/step2.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_client/step3.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_client/step4.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_client/step5.png" onclick="agrandarImagen(this)">
                    <img class="carrusel_imagen" src="../img/guides/filezilla_client/step6.png" onclick="agrandarImagen(this)">
                </div>
                <button class="carrusel_boton carrusel_izquierda" onclick="moverImagenes(-1, 'cliente')">&#10094;</button>
                <button class="carrusel_boton carrusel_derecha" onclick="moverImagenes(1, 'cliente')">&#10095;</button>
            </div>

            
            <div id="fondo-agrandado" class="carrusel_fondo-agrandado" onclick="cerrarImagen()"></div>
            <!-- ......................................................... -->
        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <hr>
        <h2 class="TituloCreditosInferior"><a href="https://byAd12.pages.dev/guides" target="_blank">byAd12.pages.dev/guides</a></h2>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <script src="../resources/blog.js"></script>
    </body>
</html>
