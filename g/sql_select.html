<!--

Código por byAd12

~ Dedicatoria a: Ruth

-->

<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex">
        <meta name="robots" content="noindex,nofollow">
        <title>SQL - Consultas</title>
        
        <link rel="stylesheet" type="text/css" href="../resources/blog.css">
    </head>
    <body>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <div class="menu_bar" id="menu_bar">
            <!-- BARRA DE MENÚ -->
            <h1 class="logo" translate="no"><a href="../index.html">by<span>Ad</span>12</a></h1>
            <ul>
                <li><a href="../guides.html">~/Guías</a></li>
                <li class="ocultarMOVIL"><a onclick="esconder()">./Ocultar</a></li>
                <li><input type="color" class="NavColorCambiar" id="NavColorCambiar2" value="#222523"></li>
            </ul>
        </div>

        <div class="gtranslate_wrapper" id="gtranslate_wrapper"></div>
        <script>window.gtranslateSettings = {"default_language":"es","native_language_names":true,"detect_browser_language":true,"languages":["es","en","de","gl","ru"],"globe_color":"#66aaff","wrapper_selector":".gtranslate_wrapper","flag_size":16,"horizontal_position":"left","vertical_position":"top","globe_size":20}</script>
        <script src="https://cdn.gtranslate.net/widgets/latest/globe.js" defer></script>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github-dark-dimmed.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/bash.min.js"></script>
        <script>hljs.highlightAll();</script>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <h1>SQL</h1>
        <h2 class="TituloSecundario" id="TituloSecundario">Structured Query Language</h2>
        <h2 class="TituloCreditosSuperior" id="InsertarCreditos"></h2>
        <hr>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <p style="color: black; position: sticky; top: 0;" id="dd"></p>
        <div class="parte1">
            <div>
                <h2>Consulta <span class="span_url_espaciado">SELECT</span></h2>
                <p>Primero hay que entrar en la BB.DD. para realizar todas las consultas.</p>

                <p>Seleccionar todas las columnas:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla;</code></pre>
                
                <p>Seleccionar columnas específicas en el orden seleccionado:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT col1, col2 FROM tabla;</code></pre>

            </div>

            <div>
                <h2>Modificador <span class="span_url_espaciado">DISTINCT</span></h2>

                <p>Solo devuelve las filas que sean no repetidas según todas las columnas dadas:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT DISTINCT col1 FROM tabla;</code></pre>
            </div>

            <div>
                <h2>Modificador <span class="span_url_espaciado">AS</span></h2>

                <p><b>Alias de Columna</b>: Muestra el título de la columna pero con otro nombre. Necesita comillas si hay espacios en blanco:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT col1 AS "alias1", col2 AS "alias2" FROM tabla;</code></pre>
            </div>

            <div>
                <h2>Cláusula <span class="span_url_espaciado">ORDER BY</span></h2>

                <p>Para cambiar el orden en el que se enseña la tabla según una columna.<br>Si no se va a enseñar una columna se puede ordenar por ella igualmente:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla ORDER BY col1 ASC/DESC;</code></pre>
                <p class="Expl"><span class="span_contenido">ASC</span> - Ascendente<br><span class="span_contenido">DESC</span> - Descendente</p>
                <p>Si se utiliza el modificador <span class="span_contenido">AS</span> (alias de columna), este se ordena por el nombre del alias, no el nombre real de la columna.</p>
            </div>

            <div>
                <h2>Filtro <span class="span_url_espaciado">WHERE</span></h2>

                <p><b>Operadores</b>:</p>
                <p><span class="span_contenido">=</span> - Igual a<br>
                    <span class="span_contenido">>=</span> - Mayor o igual que<br>
                    <span class="span_contenido"><=</span> - Menor o igual que<br>
                    <span class="span_contenido">></span> - Mayor que<br>
                    <span class="span_contenido"><</span> - Menor que<br>
                    <span class="span_contenido"><></span> - Distinto a (en algunos casos se usa <span class="span_contenido">!=</span>)</p>

                <p>Enseña solo las filas que coincidan en un campo:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT col1, col2 FROM tabla WHERE col1="valor";</code></pre>
                <p class="Expl">El valor va entre comillas o no según el tipo de valor que sea como un número.</p>
            </div>

            <div>
                <h2>Operadores Lógicos</h2>

                <p><span class="span_contenido">AND</span>: Si se cumplen 2 o más condiciones.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE col1="valor" AND col2="valor";</code></pre>

                <p><span class="span_contenido">OR</span>: Si se cumplen una condición u otra.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE col1="valor" OR col2="valor";</code></pre>

                <p><span class="span_contenido">AND</span> y <span class="span_contenido">OR</span>: Para ello se usan paréntesis.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE (col1="valor" OR col2="valor") AND col3="valor";</code></pre>

                <p><span class="span_contenido">NOT</span>: Si no es una condición.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE NOT col1="valor";</code></pre>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE NOT (col1="valor" AND col2="valor");</code></pre>
            
                <p><span class="span_contenido">LIKE</span>: Si una columna contiene o no un valor.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE col1 LIKE "%valor%";</code></pre>
                <p class="Expl">
                    <span class="span_contenido">%valor%</span> - Contener el valor.<br>
                    <span class="span_contenido">%valor</span> - Acabar por el valor.<br>
                    <span class="span_contenido">valor%</span> - Empezar por el valor.</p>

                <p><span class="span_contenido">IN</span>: Igualdad con valores exactos.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE col1 IN ("valor","valor","valor");</code></pre>
                <p class="Expl">Devuelve las filas si col1 es uno de los valores del ().</p>

                <p><span class="span_contenido">BETWEEN</span>: Solo funciona con números. Si hay decimales, se ponene con puntos.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla WHERE col1 BETWEEN "valor" AND "valor2";</code></pre>
            </div>

            <div>
                <h2>Consultas de <span class="span_url_espaciado">UNION</span></h2>

                <p>Solo funciona si se recogen campos compatibles entre ambas tablas. No hace falta que tengan el mismo nombre. Si se cogen 2 o más columas y hay 2 con los mismos valores en todas, no los muestra. Para ello se usa <span class="span_contenido">UNION ALL</span>:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT col1 FROM tabla UNION SELECT col1 FROM tabla2;</code></pre>
                <pre class="codigo" translate="no"><code class="sql">SELECT col1 FROM tabla UNION ALL SELECT col1 FROM tabla2;</code></pre>
            </div>

            <div>
                <h2>Sub-Consultas</h2>

                <p>Puede haber subconsultras dentro de otras:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT * FROM tabla1 WHERE col1 IN (SELECT col2 FROM tabla2 WHERE col3="valor");</code></pre>
            </div>

            <div>
                <h2>Funciones escalares</h2>

                <p>Se puede usar funciones dentro de otras funciones:</p>

                <p><span class="span_contenido">LCASE()</span>: Convierte los valores a minúsculas.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT LCASE(columna) FROM tabla;</code></pre>

                <p><span class="span_contenido">CONCAT()</span>: Concadenar varias columnas en una sola.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT CONCAT(col1, " ", LCASE(col2)) FROM tabla;</code></pre>

                <p><span class="span_contenido">+</span>, <span class="span_contenido">-</span>, <span class="span_contenido">*</span>, <span class="span_contenido">/</span>: Funciones matemáticas.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT (col1 * 10) + 10 FROM tabla;</code></pre>

                <p><span class="span_contenido">COUNT</span>: Devuelve un único campo con la cuenta de todas las filas que cumplan una condición.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT COUNT(*) FROM tabla WHERE col1="valor";</code></pre>

                <p><span class="span_contenido">MAX</span>: Devuelve la fila con el máximo valor de la columna en la tabla.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT MAX(col1) FROM tabla;</code></pre>

                <p><span class="span_contenido">MIN</span>: Devuelve la fila con el mínimo valor de la columna en la tabla.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT MIN(col1) FROM tabla;</code></pre>

                <p><span class="span_contenido">SUM</span>: Devuelve el valor total de la suma de la columna en la tabla.</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT SUM(col1) FROM tabla;</code></pre>

                <p>Hay mas funciones escalares que se pueden ver en <a href="https://learnsql.com/blog/standard-sql-functions-cheat-sheet/" target="_blank">learnsql.com</a>.</p>
            </div>

            <div>
                <h2><span class="span_url_espaciado">GROUP BY</span></h2>

                <pre class="codigo" translate="no"><code class="sql">SELECT COUNT(columna1), columna2 FROM tabla GROUP BY columna2;</code></pre>
                <p class="Expl">En función de columna2 nos enseñará el total de columna1 por el COUNT</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT COUNT(columna1), columna2 FROM tabla WHERE columna3="valor" GROUP BY columna2;</code></pre>
            </div>

            <div>
                <h2>Filtro <span class="span_url_espaciado">HAVING</span></h2>

                <p>Permite filtrar con funciones de agrupación:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT COUNT(columna1), columna2 FROM tabla WHERE columna3="valor" HAVING COUNT(columna1)>=10 GROUP BY columna2;</code></pre>
            </div>

            <div>
                <h2>Consulta Multi-Tabla</h2>

                <p>Para hacer consultas en más de una tabla a la vez:</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT columna1, columna2 FROM tabla1 x, tabla2 y WHERE x.columna1 = y.columna1;</code></pre>
                <p class="Expl">"x" es un alias <span class="span_contenido">AS</span> que apunta a la tabla "tabla1" e "y" también es un alias pero apunta a otra tabla llamada "tabla2".</p>
                <pre class="codigo" translate="no"><code class="sql">SELECT columna1, x.columna2, y.columna3 FROM tabla1 x, tabla2 y WHERE x.columna1 = y.columna1;</code></pre>
                <p class="Expl">Columna1 debería estar en ambas tablas.</p>
            </div>

            <div>
                <h2>Consulta <span class="span_url_espaciado">JOIN</span></h2>

                <div class="SQLImagenJoinDiv">
                    <a href="../img/guides/sql/sql_join.png"><img class="SQLImagenJoin" src="../img/guides/sql/sql_join.png"></a>
                </div>
            </div>

        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <hr>
        <h2 class="TituloCreditosInferior"><a href="https://byAd12.pages.dev/guides" target="_blank">byAd12.pages.dev/guides</a></h2>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <script src="../resources/blog.js"></script>
    </body>

</html>
