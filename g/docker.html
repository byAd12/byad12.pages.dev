<!--

Código por byAd12

~ Dedicatoria a: Ruth

-->

<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex">
        <meta name="robots" content="noindex,nofollow">
        <title>Docker - Linux</title>
        
        <link rel="stylesheet" type="text/css" href="../resources/blog.css">
    </head>
    <body>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <div class="menu_bar" id="menu_bar">
            <!-- BARRA DE MENÚ -->
            <h1 class="logo" translate="no"><a href="../index.html">by<span>Ad</span>12</a></h1>
            <ul>
                <li><a href="../guides.html">~/Guías</a></li>
                <li class="ocultarMOVIL"><a onclick="esconder()">./Ocultar</a></li>
                <li><input type="color" class="NavColorCambiar" id="NavColorCambiar2" value="#222523"></li>
            </ul>
        </div>

        <div class="gtranslate_wrapper" id="gtranslate_wrapper"></div>
        <script>window.gtranslateSettings = {"default_language":"es","native_language_names":true,"detect_browser_language":true,"languages":["es","en","de","gl","ru"],"globe_color":"#66aaff","wrapper_selector":".gtranslate_wrapper","flag_size":16,"horizontal_position":"left","vertical_position":"top","globe_size":20}</script>
        <script src="https://cdn.gtranslate.net/widgets/latest/globe.js" defer></script>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github-dark-dimmed.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/languages/bash.min.js"></script>
        <script>hljs.highlightAll();</script>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <div id="Principio"></div>
        <h1>Docker</h1>
        <h2 class="TituloSecundario" id="TituloSecundario">Build, Ship and Run</h2>
        <h2 class="TituloCreditosSuperior" id="InsertarCreditos"></h2>
        <hr>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <p style="color: black; position: sticky; top: 0;" id="dd"></p>
        
        <div class="parte1">
            <div>
                <h2>Imágenes</h2>

                <p>Instalar una imagen:</p>
                <pre class="codigo" translate="no"><code class="bash">docker pull [imagen]:(tag)</code></pre>
                <p class="Expl"><b>Tag</b>: La versión del docker a ejecutar, si no se especifica será <span class="span_contenido" translate="no">latest</span>.</p>
                
                <p>Crear un docker si iniciar el docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker create [imagen]:(tag)</code></pre>

                <p>Ver imagenes descargadas:</p>
                <pre class="codigo" translate="no"><code class="bash">docker images (imagen)</code></pre>
                <p class="Expl"><b>Imagen</b>: Ver solo una imagen específica.</p>
                
                <p>Ver imagenes descargadas:</p>
                <pre class="codigo" translate="no"><code class="bash">docker images ls</code></pre>
                <pre class="codigo" translate="no"><code class="bash">docker images (imagen)</code></pre>
                <p class="Expl"><b>Imagen</b>: Ver solo una imagen específica.</p>
                
                <p>Eliminar una imagen:</p>
                <pre class="codigo" translate="no"><code class="bash">docker image rm (imagen)</code></pre>
                
                <p>Inspeccionar una imagen:</p>
                <pre class="codigo" translate="no"><code class="bash">docker image inspect (imagen)</code></pre>
            </div>

            <div>
                <h2>Información</h2>
                
                <p>Ver la versión de la aplicación docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker --version</code></pre>
                
                <p>Ver la versión más detallada:</p>
                <pre class="codigo" translate="no"><code class="bash">docker version</code></pre>
                
                <p>Ver información del programa:</p>
                <pre class="codigo" translate="no"><code class="bash">docker info</code></pre>
                
                <p>Ver los eventos de todos los dockers:</p>
                <pre class="codigo" translate="no"><code class="bash">docker events</code></pre>

                <p>Ver los registros del docker en tiempo real:</p>
                <pre class="codigo" translate="no"><code class="bash">docker logs -f [nombre_docker]</code></pre>

                <p>Mirar el contenido de un docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker inspect --format=(formato) [docker]</code></pre>
                <p class="Expl"><b>--format=(formato)</b>: Es opcional. Este es un ejemplo de formato: <span class="span_contenido">{{.Id}}</span>.</p>

            </div>
        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <div class="parte1">
            <div>
                <h2>docker run</h2>

                <p>Crear un docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run [imagen]</code></pre>
                <p class="Expl"><b>Imagen</b>: Si no se descargó previamente, descargará latest.</p>
                
                <p>Iniciar un docker en <b>segundo plano</b>:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run -d [imagen]</code></pre>
                
                <p><b>Persistencia</b> de archivos:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run -v [ruta_en_docker]:[ruta_en_sistema_local]</code></pre>
                <p class="Expl">Así se enlaza una carpeta del docker con una carpeta local para que los archivos no se eliminen al parar el docker.</p>
                
                <p>Modificar una variable de entorno (ej. <span class="span_contenido">PUID</span>):</p>
                <pre class="codigo" translate="no"><code class="bash">docker run -e [variable_entorno]=[valor]</code></pre>

                <p>Especificar el hostname:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run -h [hostname]</code></pre>
            </div>

            <div>
                <h2>Ejecución de dockers</h2>

                <p>Iniciar un docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker start [id]</code></pre>
                <p class="Expl"><b>[id]</b>: El identificador asignado al docker.</p>

                <p>Parar un docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker stop [id]</code></pre>

                <p>Pausar/Des-pausar un docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker pause [id]</code></pre>
                <pre class="codigo" translate="no"><code class="bash">docker unpause [id]</code></pre>

            </div>

            <div>
                <h2>Listar dockers</h2>

                <p>Ver los dockers en ejecución:</p>
                <pre class="codigo" translate="no"><code class="bash">docker ps</code></pre>

                <p>Ver todos los dockers: en ejecución y parados:</p>
                <pre class="codigo" translate="no"><code class="bash">docker ps -a</code></pre>
            </div>

            <div>
                <h2>Más opciones</h2>
                
                <p>Copiar archivos del host al interior de un docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker cp [docker]:[ruta_en_docker] [ruta_en_sistema_local]</code></pre>
                <p class="Expl"><b>[docker]:____</b>: Nombre del docker específico.</p>
                <p class="Expl"><b>____:[ruta_en_docker]</b>: Donde se copiará dentro del docker.</p>
                <p class="Expl"><b>[ruta_en_sistema_local]</b>: Ruta del/los archivo/s en la máquina virtual.</p>
            </div>

            <div>
                <h2>Abrir un shell en un docker</h2>

                <p>Shell:</p>
                <pre class="codigo" translate="no"><code class="bash">docker exec -it [id] sh</code></pre>
                <p class="Expl"><b>-i</b>: Modo interactivo.</p>
                <p class="Expl"><b>-t</b>: Da a la terminal una interfaz de línea de comandos.</p>
                <p class="Expl"><b>[id]</b>: El identificador asignado al docker.</p>
                <p class="Expl"><b>sh</b>: Abre una sesión de shell. También puede ser bash u otro.</p>
            </div>

            <div>
                <h2>Modificación de un docker</h2>
                
                <p>Asignar un nombre:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --name [nuevo_nombre] [docker]</code></pre>
                <p class="Expl"><b>[docker]</b>: Seleccionar el docker a ejecutar.</p>
                
                <p>Modificar el reinicio:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --restart unless-stopped [docker]</code></pre>
                <p class="Expl"><b>unless-stopped</b>: Ejecutar un docker persistentemente a menos de que se pare manualmente.</p>
            </div>
            <div>
                <h2>Limitar recursos al docker</h2>
                
                <p>Limitar núcleos de la CPU:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --cpus [Cantidad_CPU] [docker]</code></pre>
                <p class="Expl"><b>[CANTIDAD_CPU]</b>: Número (que puede ser decimal) que indica los núcleos máximos para el docker.</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --memory [Cantidad_RAM] [docker]</code></pre>
                <p class="Expl"><b>[CANTIDAD_RAM]</b>: Número que indica la cantidad máxima de RAM para el docker. <u>Ejemplo</u>: "512M" (MiB), "1G" (GiB).</p>
            
                <p>Cualquiera de estas opciones se puede modificar más tarde con:</p>
                <pre class="codigo" translate="no"><code class="bash">docker update [Parámetros] [docker]</code></pre>
                
            </div>
            
            <div>
                <h2>Volúmenes</h2>

                <p>Ver volúmenes:</p>
                <pre class="codigo" translate="no"><code class="bash">docker volume ls</code></pre>

                <p>Crear volumen:</p>
                <pre class="codigo" translate="no"><code class="bash">docker volume create [nombre_volumen]</code></pre>

                <p>Eliminar volumen:</p>
                <pre class="codigo" translate="no"><code class="bash">docker volume rm [nombre_volumen]</code></pre>

                <p>Crear una volumen en el host donde se guardarán los datos del docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --mount type=volume,src=[nombre_volumen],dst=[ruta_en_docker] [docker]</code></pre>
                <p class="Expl">Todo lo que se haya en <span class="span_contenido" translate="no">src</span> se cargarán en <span class="span_contenido" translate="no">dst</span>.</p>

            </div>
        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <h1>Redes</h1>
        <hr class="SeparadorConTitulo">
        <!-- ......................................................... -->
        <!-- ......................................................... -->

        <div class="parte1">
            <div>
                <h2>Configuración de Red</h2>
                <p>Ver las redes y de que tipos son para cada docker:</p>
                <pre class="codigo" translate="no"><code class="bash">docker network ls</code></pre>
            </div>

            <div>
                <h2>Redireccionar puertos</h2>

                <p>Puertos:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run -p 8089:80 [docker]</code></pre>
                <p class="Expl">Pueden redireccionarse varios puertos a la vez, para ello hay que repetir la opción <span class="span_contenido" translate="no">-p</span> por cada puerto a redireccionar.</p>
                <p class="Expl"><b>-p 8089:80</b>: Redirecciona el puerto <span class="span_contenido" translate="no">8089</span> del host al <span class="span_contenido" translate="no">80</span> del docker.</p>
                <p class="Expl"><b>[docker]</b>: Seleccionar el docker a ejecutar.</p>
                <pre class="codigo" translate="no"><code class="bash">docker run -p 127.0.0.2:8089:80 [docker]</code></pre>
                <p class="Expl">En este caso se redirecciona el puerto <span class="span_contenido" translate="no">8089</span> de la IP <span class="span_contenido" translate="no">127.0.0.2</span> al puerto <span class="span_contenido" translate="no">80</span> del docker.</p>
            </div>

            <div>
                <h2>Tipos de redes</h2>

                <p>Red host:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --netork host [docker]</code></pre>
                <p class="Expl">No tendrá IP ni mapeo de puertos. Solo es un proceso del host.</p>

                <p>Red Bridge:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run [docker]</code></pre>
                <p class="Expl">No hace falta especificarlo al ser la elegida por defecto. Tiene IP propia (a partir de la red creada por docker) y permite usar mapeo de puertos. El DNS que tendrá será el utilizado en el host.</p>
            </div>

            <div>
                <h2>Modificar redes</h2>

                <p>Crear una red:</p>
                <pre class="codigo" translate="no"><code class="bash">docker network create --driver (tipo_red) --subnet (ip_red/máscara) --gateway (gateway) [nombre_red]</code></pre>
                <p class="Expl"><span class="span_contenido" translate="no">--driver</span>, <span class="span_contenido" translate="no">--subnet</span> y <span class="span_contenido" translate="no">--gateway</span> son opcionales. Creará una interfaz en el host.</p>
                <p class="Expl"><b>--driver</b>: Es el modo de red a seleccionar como <span class="span_contenido" translate="no">bridge</span>, <span class="span_contenido" translate="no">none</span>, <span class="span_contenido" translate="no">host</span>, ..</p>
                
                <p>Eliminar una red tipo <span class="span_contenido" translate="no">bridge</span>:</p>
                <pre class="codigo" translate="no"><code class="bash">docker network rm [nombre_red]</code></pre>

                <p>Cambiar un docker existente a la nueva red:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --network [nombre_red] [docker]</code></pre>
            </div>

        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <h1>Ejemplos</h1>
        <hr class="SeparadorConTitulo">
        <!-- ......................................................... -->
        <!-- ......................................................... -->

        <div class="parte1">
            <div>
                <h2>Docker "<span>httpd</span>"</h2>
                <p>Añadir una página .html:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run -p 80:80 -p 443:443 -d httpd</code></pre>
                <pre class="codigo" translate="no"><code class="bash">docker exec -it [id] sh</code></pre>
                <pre class="codigo" translate="no"><code class="bash">apt update</code></pre>
                <pre class="codigo" translate="no"><code class="bash">apt install nano</code></pre>
                <p class="Expl"><b>./htdocs/index.html</b>: Editar el archivo para cambiar la página default.</p>
                
                <p>Hay que acceder a la siguiente URL <span class="span_url" translate="no">http://{Tu_IP}:{puerto}</span>, siendo el puerto el que redirige al docker (especificado al hacer <span class="span_contenido" translate="no">docker run</span>).</p>
            </div>
            
            <div>
                <h2>Docker "<span>heimdall</span>"</h2>
                <p>Sirve para organizar aplicaciones web en un solo lugar. Se accede mediante la URL <span class="span_url" translate="no">http://localhost:[puerto]</span>:</p>
                <pre class="codigo" translate="no"><code class="bash">docker run --name heimdall -e PUID=1000 -e PGID=1000 -e TZ=america/new_york -p 9998:80 -p 9997:443 -v /home/usuario/Descargas/docker_adr:/config --restart unless-stopped linuxserver/heimdall</code></pre>
            </div>
        </div>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <hr>
        <h2 class="TituloCreditosInferior"><a href="https://byAd12.pages.dev/guides" target="_blank">byAd12.pages.dev/guides</a> - <a href="https://youtu.be/Wgo3Q5sIxi4?si=LV1GvOg8Uhu-HHIw" target="_blank">Fuente</a></h2>
        <!-- ......................................................... -->
        <!-- ......................................................... -->
        <script src="../resources/blog.js"></script>
    </body>
</html>
